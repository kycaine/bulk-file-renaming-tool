<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bulk File Renaming Tool (Offline)</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <header>
    <h1>Bulk File Renaming Tool (Offline)</h1>
    <p class="subtitle">Smart auto-pattern detection &amp; custom rename rules</p>
  </header>

  <main>
    <div class="grid-layout">
      <!-- Row 1: Step 1 full width -->
      <section class="panel span-3">
        <h2>1. Select Files</h2>
        <p class="small-note">Choose a folder or individual files to prepare renaming.</p>

        <div class="btn-row">
          <button id="btnSelectFolder">Select Folder</button>
          <button id="btnSelectFiles">Select Files</button>
          <button id="btnClearFiles">Clear</button>
          <input type="file" id="fileInput" multiple style="display: none;" />
          <input type="file" id="folderInput" webkitdirectory directory multiple style="display: none;" />
        </div>

        <div class="file-list" id="fileList">
          <table class="file-table" aria-describedby="fileList">
            <thead>
              <tr>
                <th style="width:48px">#</th>
                <th>Filename</th>
                <th style="width:120px">Size</th>
                <th style="width:120px">Modified</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </div>
      </section>

      <section class="panel">
        <h2>2. Auto-Detected Segments</h2>
        <p class="small-note">Detected patterns from filenames (auto parsed)</p>

        <div id="detectedSegments" class="segment-list">
        </div>
      </section>

      <section class="panel">
        <h2>3. Rename Rules (Optional)</h2>
        <p class="small-note">Add rule for files, e.g., remove -copy suffix</p>
        <div id="ruleBuilder"></div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
          <button id="btnAddRule">+ Add Rule</button>
          <span class="muted">Rules are applied in order. Drag to reorder in future.</span>
        </div>

        <h3 style="margin-top:14px">Saved Rules</h3>
        <div id="rulesList" class="muted">No saved rules yet.</div>
      </section>

     <section class="panel">
      <h2>4. Template</h2>
      <p class="small-note">Build your filename using blocks. Use @date or @var1 for dynamic parts.</p>

      <div id="templateBuilder">
          <div class="template-line">
              <input class="template-input" placeholder="Type text or @date" />
              <button class="delete-template-line">Ã—</button>
          </div>
      </div>

      <button id="btnAddTemplateLine" style="margin-top:10px">+ Add Part</button>

      <div style="display:flex;gap:8px;margin-top:10px;align-items:center">
        <button id="btnApplyTemplate">Apply Template</button>
      </div>
    </section>


      <section class="panel span-3">
        <h2>5. Preview Output</h2>
        <p class="small-note">Review the new file names before applying changes.</p>

       <div id="previewList" class="preview-list">
        <table class="preview-table" aria-describedby="previewList">
          <thead>
            <tr>
              <th style="width:48px">#</th>
              <th>Original Filename</th>
              <th>New Filename Preview</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>

        <div style="margin-top:12px;display:flex;gap:10px;align-items:center">
          <button class="mini" id="btnRename" style="background:var(--success);border:none;color:#04211a">Apply Rename</button>
          <button class="mini" id="btnExport" style="background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)">Export CSV</button>
          <div style="flex:1"></div>
          <div class="muted">Selected: <strong id="selectedCount">0</strong></div>
        </div>
      </section>

    </div>
  </main>

  <footer>
  </footer>
  <script type="module" src="./main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</body>
</html>
